<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GNS3 REST API python library.">
    <meta name="author" content="David Flores">
    <link rel="canonical" href="https://davidban77.github.io/gns3fy/user-guide/">
    <link rel="../img/favicon.ico">

    
    <title>User Guide - gns3fy</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link href="../css/highlight.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">gns3fy</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Overview</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">User Guide</a>
                    </li>
                
                
                
                    <li >
                        <a href="../api_reference/">API Reference</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../about/changelog/">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../about/license/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="..">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../api_reference/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/davidban77/gns3fy/edit/develop/docs/content/user-guide.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#interact-with-existing-project">Interact with existing Project</a></li>
            <li class="second-level"><a href="#gns3connector-and-project-objects">Gns3Connector and Project objects</a></li>
                
            <li class="second-level"><a href="#node-and-link-objects">Node and Link objects</a></li>
                
        <li class="first-level "><a href="#creating-a-new-project">Creating a new Project</a></li>
            <li class="second-level"><a href="#project-creation">Project creation</a></li>
                
            <li class="second-level"><a href="#node-creation">Node creation</a></li>
                
            <li class="second-level"><a href="#link-creation">Link creation</a></li>
                
        <li class="first-level "><a href="#examples">Examples</a></li>
            <li class="second-level"><a href="#manipulate-a-node-from-a-project-instance">Manipulate a Node from a Project instance</a></li>
                
            <li class="second-level"><a href="#check-existing-templates-and-projects-available">Check existing templates and projects available</a></li>
                
            <li class="second-level"><a href="#get-nodes-and-links-summary">Get Nodes and Links summary</a></li>
                
            <li class="second-level"><a href="#migrate-templates-between-gns3-servers">Migrate templates between GNS3 servers</a></li>
                
            <li class="second-level"><a href="#check-server-cpu-and-memory-usage">Check server CPU and Memory usage</a></li>
                
            <li class="second-level"><a href="#create-and-list-project-snapshots">Create and list project snapshots</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1>How it works</h1>
<p>The library provide the following interfaces:</p>
<ul>
<li><code>Gns3Connector</code>: Main object that interacts with the GNS3 server REST API and its objective is to be its interface.</li>
<li><code>Project</code>: Interface of a project/lab defined.</li>
<li><code>Node</code>: Interface of a node/entity defined.</li>
<li><code>Link</code>: Interface of a link defined.</li>
</ul>
<p>The <code>Gns3Connector</code> is mandatory and needs to be assigned to the <code>Project</code>, <code>Node</code> or <code>Link</code> object you want to work with, the latter uses the connector to interact with the REST API.</p>
<p>Next you can see different ways to interact with the library.</p>
<h2 id="interact-with-existing-project">Interact with existing Project</h2>
<h3 id="gns3connector-and-project-objects">Gns3Connector and Project objects</h3>
<p>Here is an example of defining a connector object and a project that is already configured on a local GNS3 server:</p>
<pre><code class="python">&gt;&gt;&gt; from gns3fy import Gns3Connector, Project
&gt;&gt;&gt; from tabulate import tabulate

&gt;&gt;&gt; server = Gns3Connector(&quot;http://localhost:3080&quot;)

# To show the available projects on the server
&gt;&gt;&gt; print(
        tabulate(
            server.projects_summary(is_print=False),
            headers=[&quot;Project Name&quot;, &quot;Project ID&quot;, &quot;Total Nodes&quot;, &quot;Total Links&quot;, &quot;Status&quot;],
        )
    )
&quot;&quot;&quot;
Project Name    Project ID                              Total Nodes    Total Links  Status
--------------  ------------------------------------  -------------  -------------  --------
test2           c9dc56bf-37b9-453b-8f95-2845ce8908e3             10              9  opened
API_TEST        4b21dfb3-675a-4efa-8613-2f7fb32e76fe              6              4  opened
mpls-bgpv2      f5de5917-0ac5-4850-82b1-1d7e3c777fa1             30             40  closed
&quot;&quot;&quot;

&gt;&gt;&gt; lab = Project(name=&quot;API_TEST&quot;, connector=server)

# Retrieve its information and display
&gt;&gt;&gt; lab.get()

&gt;&gt;&gt; print(lab)
Project(project_id='4b21dfb3-675a-4efa-8613-2f7fb32e76fe', name='API_TEST', status='opened', ...)

# Access the project attributes
&gt;&gt;&gt; print(f&quot;Name: {lab.name} -- Status: {lab.status} -- Is auto_closed?: {lab.auto_close}&quot;)
&quot;Name: API_TEST -- Status: closed -- Is auto_closed?: False&quot;

# Open the project
&gt;&gt;&gt; lab.open()
&gt;&gt;&gt; lab.status
opened

# Verify the stats
&gt;&gt;&gt; lab.stats
{'drawings': 0, 'links': 4, 'nodes': 6, 'snapshots': 0}

# List the names and status of all the nodes in the project
for node in lab.nodes:
    print(f&quot;Node: {node.name} -- Node Type: {node.node_type} -- Status: {node.status}&quot;)
&quot;&quot;&quot;
Node: Ethernetswitch-1 -- Node Type: ethernet_switch -- Status: started
...
&quot;&quot;&quot;
</code></pre>

<p>As noted before you can also use the <code>Gns3Connector</code> as an interface object to the GNS3 server REST API.</p>
<pre><code class="python">&gt;&gt;&gt; server.get_version()
{'local': False, 'version': '2.2.0b4'}

&gt;&gt;&gt; server.get_templates()
[{'adapter_type': 'e1000',
  'adapters': 13,
  'bios_image': '',
  'boot_priority': 'c',
  'builtin': False,
  'category': 'router',
  'cdrom_image': '',
  'compute_id': 'local',
  ...
</code></pre>

<h3 id="node-and-link-objects">Node and Link objects</h3>
<p>You have access to the <code>Node</code> and <code>Link</code> objects as well, and this gives you the ability to start, stop, suspend the individual element in a GNS3 project.</p>
<pre><code class="python">...
&gt;&gt;&gt; PROJECT_ID = &quot;4b21dfb3-675a-4efa-8613-2f7fb32e76fe&quot;
&gt;&gt;&gt; alpine1 = Node(project_id=PROJECT_ID, name=&quot;alpine-1&quot;, connector=server)

&gt;&gt;&gt; alpine1.get()
&gt;&gt;&gt; print(alpine1)
Node(name='alpine-1', node_type='docker', node_directory= ...)

# And you can access the attributes the same way as the project
&gt;&gt;&gt; print(f&quot;Name: {alpine1.name} -- Status: {alpine1.status} -- Console: {alpine1.console}&quot;)
&quot;Name: alpine-1 -- Status: started -- Console: 5005&quot;

# Stop the node and start (you can just restart it as well)
&gt;&gt;&gt; alpine1.stop()
&gt;&gt;&gt; alpine1.status
stopped

&gt;&gt;&gt; alpine1.start()
&gt;&gt;&gt; alpine1.status
started

# You can also see the Link objects assigned to this node
&gt;&gt;&gt; alpine1.links
[Link(link_id='4d9f1235-7fd1-466b-ad26-0b4b08beb778', link_type='ethernet', ...)]

# And in the same way you can interact with a Link object
&gt;&gt;&gt; link1 = alpine1.links[0]
&gt;&gt;&gt; print(f&quot;Link Type: {link1.link_type} -- Capturing?: {link1.capturing} -- Endpoints: {link1.nodes}&quot;)
Link Type: ethernet -- Capturing?: False -- Endpoints: [{'adapter_number': 2, ...}]
</code></pre>

<h2 id="creating-a-new-project">Creating a new Project</h2>
<p>You can find here a couple of methods that are available on the interfaces provided by the library.</p>
<p>To navigate to some of them and see their value, lets create a simple lab on the server with 2 nodes connected betweem each other.</p>
<h3 id="project-creation">Project creation</h3>
<p>Lets start by creating a lab called <code>test_lab</code></p>
<pre><code class="python">...
&gt;&gt;&gt; lab = Project(name=&quot;test_lab&quot;, connector=server)

&gt;&gt;&gt; lab.create()

&gt;&gt;&gt; lab
Project(project_id='e83f1275-3a6f-48f7-88ee-36386ee27a55', name='test_lab', status='opened',...)
</code></pre>

<p>You can see you get the <code>project_id</code>. In GNS3 the project ID is key for all interactions under that project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a complete list of the attibutes you can see the <a href="../api_reference/#project-objects">API Reference</a></p>
</div>
<h3 id="node-creation">Node creation</h3>
<p>Next, lets try and create a Ethernet switch node. For this we need to know the template and node type of it.</p>
<pre><code class="python">...
&gt;&gt;&gt;  for template in server.get_templates():
...:     if &quot;switch&quot; in template[&quot;name&quot;]:
...:         print(f&quot;Template: {template['name']} -- ID: {template['template_id']}&quot;)
...:
&quot;&quot;&quot;
Template: Ethernet switch -- ID: 1966b864-93e7-32d5-965f-001384eec461
Template: Frame Relay switch -- ID: dd0f6f3a-ba58-3249-81cb-a1dd88407a47
Template: ATM switch -- ID: aaa764e2-b383-300f-8a0e-3493bbfdb7d2
&quot;&quot;&quot;

&gt;&gt;&gt; server.get_template_by_name(&quot;Ethernet switch&quot;)
{'builtin': True,
 'category': 'switch',
 'console_type': 'none',
 'name': 'Ethernet switch',
 'symbol': ':/symbols/ethernet_switch.svg',
 'template_id': '1966b864-93e7-32d5-965f-001384eec461',
 'template_type': 'ethernet_switch'}
</code></pre>

<p>By knowing the template information of the device we can create the Node instace of it</p>
<pre><code class="python">...
&gt;&gt;&gt; switch = Node(
...:    project_id=lab.project_id,
...:    connector=server,
...:    name=&quot;Ethernet-switch&quot;,
...:    template=&quot;Ethernet switch&quot;
...:)

&gt;&gt;&gt; switch.create()

&gt;&gt;&gt; switch
Node(name='Ethernet-switch', project_id='6e75bca5-3fa0-4219-a7cf-f82c0540fb73', node_id='c3607609-49'...)
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a complete list of the attibutes you can see the <a href="../api_reference/#node-objects">API Reference</a></p>
</div>
<p>Now lets add an docker Alpine host to the project (<strong>NOTE:</strong> The docker image and template needs to be already configured in GNS3)</p>
<pre><code class="python">...
&gt;&gt;&gt; alpine = Node(
...:    project_id=lab.project_id,
...:    connector=server,
...:    name=&quot;alpine-host&quot;,
...:    template=&quot;alpine&quot;
...:)

&gt;&gt;&gt; alpine.create()

&gt;&gt;&gt; alpine
Node(name='alpine-host', project_id='6e75bca5-3fa0-4219-a7cf-f82c0540fb73', node_id='8c11eb8b'...)

&gt;&gt;&gt; alpine.properties
{'adapters': 2,
 'aux': 5026,
 'category': 'guest',
 'console_auto_start': False,
 'console_http_path': '/',
 'console_http_port': 80,
 'console_resolution': '1024x768',
 'console_type': 'telnet',
 'container_id': 'f26b6aee763a9399c93c86032b75717c57b260e5010e88c4d410ce13554771df',
 'custom_adapters': [],
 'environment': '',
 'extra_hosts': '',
 'extra_volumes': [],
 'image': 'alpine:latest',
 'start_command': '',
 'symbol': ':/symbols/affinity/circle/gray/docker.svg',
 'usage': ''}

&gt;&gt;&gt; alpine.ports
[{'adapter_number': 0,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'eth0',
  'port_number': 0,
  'short_name': 'eth0'},
 {'adapter_number': 1,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'eth1',
  'port_number': 0,
  'short_name': 'eth1'}]
</code></pre>

<p>You can access all of the host attributes and see their specifications based on the template defined on the server.</p>
<p>To update the <code>lab</code> object with their latest nodes added</p>
<pre><code class="python">...
&gt;&gt;&gt; lab.get()

# I have shorten the output shown
&gt;&gt;&gt; lab.nodes
&quot;&quot;&quot;
[Node(name='Ethernet-switch', project_id='6e75bca5-3fa0-4219-a7cf-f82c0540fb73', node_id='c3607609...
Node(name='alpine-host1', project_id='6e75bca5-3fa0-4219-a7cf-f82c0540fb73', node_id='8c11eb8b...
]
&quot;&quot;&quot;
</code></pre>

<h3 id="link-creation">Link creation</h3>
<p>Next lets create a link between the switch and the alpine host.</p>
<p><code>Switch Etherner0 &lt;--&gt; Alpine Eth1</code></p>
<pre><code class="python">...
&gt;&gt;&gt; lab.create_link('Ethernet-switch', 'Ethernet0', 'alpine-host1', 'eth1')
&quot;Created Link-ID: b0d0df11-8ed8-4d1d-98e4-3776c9b7bdce -- Type: ethernet&quot;

&gt;&gt;&gt; lab.links
[Link(link_id='b0d0df11-8ed8-4d1d-98e4-3776c9b7bdce', link_type='ethernet', project_id='6e7'...)]
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a complete list of the attibutes you can see the <a href="../api_reference/#link-objects">API Reference</a></p>
</div>
<p>This is one way to create a link (using the <code>lab</code> object), but you can also create it using a <code>Link</code> instance as well.</p>
<p>We need the link mapping to be set under the <code>nodes</code> attribute of the <code>Link</code> instance. For this we need:</p>
<ul>
<li><code>node_id</code></li>
<li><code>adapter_number</code></li>
<li><code>port_number</code></li>
</ul>
<pre><code class="python">...
&gt;&gt;&gt; switch.ports
[{'adapter_number': 0,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'Ethernet0',
  'port_number': 0,
  'short_name': 'e0'},
 {'adapter_number': 0,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'Ethernet1',
  'port_number': 1,
  'short_name': 'e1'},
  ...

&gt;&gt;&gt; alpine.ports
[{'adapter_number': 0,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'eth0',
  'port_number': 0,
  'short_name': 'eth0'},
 {'adapter_number': 1,
  'data_link_types': {'Ethernet': 'DLT_EN10MB'},
  'link_type': 'ethernet',
  'name': 'eth1',
  'port_number': 0,
  'short_name': 'eth1'}]
</code></pre>

<p>Gettings this information from both nodes we can create the Link.</p>
<pre><code class="python">...
&gt;&gt;&gt; nodes = [
    dict(node_id=switch.node_id, adapter_number=0, port_number=1),
    dict(node_id=alpine.node_id, adapter_number=0, port_number=0)
]

&gt;&gt;&gt; extra_link = Link(project_id=lab.project_id, connector=server, nodes=nodes)

&gt;&gt;&gt; extra_link.create()

&gt;&gt;&gt; extra_link
Link(link_id='edf38e1a-67e7-4060-8493-0e222ec22072', link_type='ethernet', project_id='6e75bca5'...)
</code></pre>

<p>You can get the latest link information on the project</p>
<pre><code class="python">...
&gt;&gt;&gt; lab.get_links()

# You can see the 2 links created earlier
&gt;&gt;&gt; lab.links
[Link(link_id='b0d0df11-8ed8-4d1d-98e4-3776c9b7bdce', link_type='ethernet'...
Link(link_id='=', link_type='ethernet'...]
</code></pre>

<p>You can see the final result if you open the lab on your GNS3 client:</p>
<p><img alt="test_lab" src="../img/create_lab_example.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The devices are all clustered together. This will be addressed in the future. For te moment you can re-arrange them the way you want</p>
</div>
<h2 id="examples">Examples</h2>
<p>Here are some examples of what you can do with the library</p>
<h3 id="manipulate-a-node-from-a-project-instance">Manipulate a Node from a Project instance</h3>
<p>The <code>Project</code> object gives you all the nodes configured on it. This is typically saved under <code>Project.nodes</code> as a list of <code>Node</code> instances.</p>
<p>When collecting the information of a project on a given time, you also retrieve by default all of its nodes. Each of the nodes are assigned the <code>Gns3Connector</code> by default if you follow the procedure below.</p>
<pre><code class="python">...
&gt;&gt;&gt; server = Gns3Connector(url=&quot;http://localhost:3080&quot;)]
&gt;&gt;&gt; print(server)
'&lt;gns3fy.gns3fy.Gns3Connector at 0x10d4c8e10&gt;'
&gt;&gt;&gt; lab = Project(name=&quot;lab&quot;, connector=server)

# Retrieve the lab information and print the amount of nodes configured
&gt;&gt;&gt; lab.get()
&gt;&gt;&gt; print(len(lab.nodes))
2

# Assign one of the nodes to a varaible and start manipulating it
&gt;&gt;&gt; node_1 = lab.nodes[0]
&gt;&gt;&gt; print(node_1.status)
'stopped'

&gt;&gt;&gt; node_1.start()
&gt;&gt;&gt; print(node_1.status)
'started'
&gt;&gt;&gt; print(node_1.connector)
'&lt;gns3fy.gns3fy.Gns3Connector at 0x10d4c8e10&gt;'
</code></pre>

<p><code>node_1</code> has the same connector object as reference for interaction with the server.</p>
<p>The same can be done with a <code>Link</code> by interacting with the <code>Project.links</code> attribute.</p>
<h3 id="check-existing-templates-and-projects-available">Check existing templates and projects available</h3>
<p>The templates and projects configured on the GNS3 server can be viewed by using the <code>templates_summary</code> and <code>projects_summary</code>.</p>
<pre><code class="python">...
&gt;&gt;&gt; from tabulate import tabulate
&gt;&gt;&gt; templates_summary = server.templates_summary(is_print=False)
&gt;&gt;&gt; print(
        tabulate(
            server.templates_summary(is_print=False),
            headers=[
                &quot;Template Name&quot;,
                &quot;Template ID&quot;,
                &quot;Type&quot;,
                &quot;Builtin&quot;,
                &quot;Console&quot;,
                &quot;Category&quot;,
            ],
        )
    )

&quot;&quot;&quot;
Template Name       Template ID                           Type                Builtin    Console    Category
------------------  ------------------------------------  ------------------  ---------  ---------  ----------
IOU-L3              8504c605-7914-4a8f-9cd4-a2638382db0e  iou                 False      telnet     router
IOU-L2              92cccfb2-6401-48f2-8964-3c75323be3cb  iou                 False      telnet     switch
vEOS                c6203d4b-d0ce-4951-bf18-c44369d46804  qemu                False      telnet     router
alpine              847e5333-6ac9-411f-a400-89838584371b  docker              False      telnet     guest
Cloud               39e257dc-8412-3174-b6b3-0ee3ed6a43e9  cloud               True       N/A        guest
NAT                 df8f4ea9-33b7-3e96-86a2-c39bc9bb649c  nat                 True       N/A        guest
VPCS                19021f99-e36f-394d-b4a1-8aaa902ab9cc  vpcs                True       N/A        guest
Ethernet switch     1966b864-93e7-32d5-965f-001384eec461  ethernet_switch     True       none       switch
Ethernet hub        b4503ea9-d6b6-3695-9fe4-1db3b39290b0  ethernet_hub        True       N/A        switch
Frame Relay switch  dd0f6f3a-ba58-3249-81cb-a1dd88407a47  frame_relay_switch  True       N/A        switch
ATM switch          aaa764e2-b383-300f-8a0e-3493bbfdb7d2  atm_switch          True       N/A        switch
&quot;&quot;&quot;

&gt;&gt;&gt; projects_summary = server.projects_summary(is_print=False)
&gt;&gt;&gt; print(
        tabulate(
            server.projects_summary(is_print=False),
            headers=[
                &quot;Project Name&quot;,
                &quot;Project ID&quot;,
                &quot;Total Nodes&quot;,
                &quot;Total Links&quot;,
                &quot;Status&quot;,
            ],
        )
    )

&quot;&quot;&quot;
Project name    Project ID                              Total Nodes    Total Links  Status
--------------  ------------------------------------  -------------  -------------  --------
mgmt_network    c9dc56bf-37b9-453b-8f95-2845ce8908e3             10              9  opened
ospf_lab        4b21dfb3-675a-4efa-8613-2f7fb32e76fe              6              4  opened
[API] New test  f5de5917-0ac5-4850-82b1-1d7e3c777fa1              0              0  closed
test_ansible    5599f8f5-9074-4372-b20e-e96eb3bd27c6              4              4  opened
&quot;&quot;&quot;
</code></pre>

<h3 id="get-nodes-and-links-summary">Get Nodes and Links summary</h3>
<p>For a given project you can use <code>nodes_summary</code> and <code>links_summary</code>, that if used with a library like <code>tabulate</code> you can obtain the following:</p>
<pre><code class="python">...
&gt;&gt;&gt; from tabulate import tabulate

&gt;&gt;&gt; nodes_summary = lab.nodes_summary(is_print=False)

&gt;&gt;&gt; print(
...     tabulate(nodes_summary, headers=[&quot;Node&quot;, &quot;Status&quot;, &quot;Console Port&quot;, &quot;ID&quot;])
... )
&quot;&quot;&quot;
Node              Status      Console Port  ID
----------------  --------  --------------  ------------------------------------
Ethernetswitch-1  started             5000  da28e1c0-9465-4f7c-b42c-49b2f4e1c64d
IOU1              started             5001  de23a89a-aa1f-446a-a950-31d4bf98653c
IOU2              started             5002  0d10d697-ef8d-40af-a4f3-fafe71f5458b
vEOS-4.21.5F-1    started             5003  8283b923-df0e-4bc1-8199-be6fea40f500
alpine-1          started             5005  ef503c45-e998-499d-88fc-2765614b313e
Cloud-1           started                   cde85a31-c97f-4551-9596-a3ed12c08498
&quot;&quot;&quot;
&gt;&gt;&gt; links_summary = lab.links_summary(is_print=False)
&gt;&gt;&gt; print(
...     tabulate(links_summary, headers=[&quot;Node A&quot;, &quot;Port A&quot;, &quot;Node B&quot;, &quot;Port B&quot;])
... )
&quot;&quot;&quot;
Node A          Port A       Node B            Port B
--------------  -----------  ----------------  -----------
IOU1            Ethernet1/0  IOU2              Ethernet1/0
vEOS-4.21.5F-1  Management1  Ethernetswitch-1  Ethernet0
vEOS-4.21.5F-1  Ethernet1    alpine-1          eth0
Cloud-1         eth1         Ethernetswitch-1  Ethernet7
&quot;&quot;&quot;
</code></pre>

<p>I have shown the <code>projects_summary</code> earlier, here is another one that is helpful</p>
<pre><code class="python">...
&gt;&gt;&gt; print(
        tabulate(
            server.templates_summary(is_print=False),
            headers=[
                &quot;Template Name&quot;,
                &quot;Template ID&quot;,
                &quot;Type&quot;,
                &quot;Builtin&quot;,
                &quot;Console&quot;,
                &quot;Category&quot;,
            ],
        )
    )

&quot;&quot;&quot;
Template Name       Template ID                           Type                Builtin    Console    Category
------------------  ------------------------------------  ------------------  ---------  ---------  ----------
IOU-L3              8504c605-7914-4a8f-9cd4-a2638382db0e  iou                 False      telnet     router
IOU-L2              92cccfb2-6401-48f2-8964-3c75323be3cb  iou                 False      telnet     switch
vEOS                c6203d4b-d0ce-4951-bf18-c44369d46804  qemu                False      telnet     router
alpine              847e5333-6ac9-411f-a400-89838584371b  docker              False      telnet     guest
Cloud               39e257dc-8412-3174-b6b3-0ee3ed6a43e9  cloud               True       N/A        guest
NAT                 df8f4ea9-33b7-3e96-86a2-c39bc9bb649c  nat                 True       N/A        guest
VPCS                19021f99-e36f-394d-b4a1-8aaa902ab9cc  vpcs                True       N/A        guest
Ethernet switch     1966b864-93e7-32d5-965f-001384eec461  ethernet_switch     True       none       switch
Ethernet hub        b4503ea9-d6b6-3695-9fe4-1db3b39290b0  ethernet_hub        True       N/A        switch
Frame Relay switch  dd0f6f3a-ba58-3249-81cb-a1dd88407a47  frame_relay_switch  True       N/A        switch
ATM switch          aaa764e2-b383-300f-8a0e-3493bbfdb7d2  atm_switch          True       N/A        switch
&quot;&quot;&quot;
</code></pre>

<h3 id="migrate-templates-between-gns3-servers">Migrate templates between GNS3 servers</h3>
<p>You may need to backup your current templates configuration of one server to another, or just want to standardize the templates used across your GNS3 server.</p>
<p>Here is a simple script that shows an example of how to achive it with <code>Gns3Connector</code>.</p>
<p><code>migrate_gns3_templates.py</code></p>
<pre><code class="python">from gns3fy import Gns3Connector

OLD_URL = &quot;http://gns3server01:3080&quot;
NEW_URL = &quot;http://gns3server02:3080&quot;

def main()
    # Define the server objects
    old_server = Gns3Connector(url=OLD_URL)
    new_server = Gns3Connector(url=NEW_URL)

    # Retrive their current templates
    old_server_templates = old_server.get_templates()
    new_server_templates = new_server.get_templates()

    # Now pass the templates
    for template in old_server_templates:
        # Bypass templates already configured on new server
        if any(template[&quot;name&quot;] == x[&quot;name&quot;] for x in new_server_templates):
            print(f&quot;Template: {template['name']} already present. Skipping...&quot;)
            continue

        # Pass template
        new_server.create_template(**template)
        print(f&quot;Template: {template['name']} passed!&quot;)

if __name__ == '__main__':
    main()
</code></pre>

<p>It can produce an output similar to this:</p>
<p><code>python migrate_gns3_templates.py</code></p>
<pre><code>Template: vEOS-4.21.5F passed!
Template: Junos vMX passed!
Template: alpine passed!
Template: Cloud already present. Skipping...
Template: NAT already present. Skipping...
Template: VPCS already present. Skipping...
Template: Ethernet switch already present. Skipping...
Template: Ethernet hub already present. Skipping...
Template: Frame Relay switch already present. Skipping...
Template: ATM switch already present. Skipping...
Template: netautomator passed!
Template: Cisco IOSv 15.7(3)M3 passed!
Template: Cisco IOSvL2 15.2.1 passed!
Template: Cisco IOSvL2 15.2(20170321:233949) passed!
Template: Cisco IOS XRv 9000 6.5.1 passed!
Template: Cisco IOS XRv 6.1.3 passed!
Template: Cisco NX-OSv 7.3.0 passed!
Template: Cisco ASAv 9.9.2 passed!
Template: Cisco CSR1000v 16.9.4 passed!
Template: Cumulus VX 3.7.8 passed!
Template: Cisco NX-OSv 9000 7.0.3.I7.4 passed!
Template: Arista vEOS 4.21.5F passed!
</code></pre>

<h3 id="check-server-cpu-and-memory-usage">Check server CPU and Memory usage</h3>
<p>You can use the <code>get_compute</code> method to retrieve information about the GNS3 server that is running the emulations.</p>
<p>Here is an example of getting the CPU and Memory average usage for a period of time and use that information to determine if a hungre service router can be turned on.</p>
<pre><code class="python">import time
from gns3fy import Gns3Connector, Project

server = Gns3Connector(url=&quot;http://gns3server&quot;)

lab = Project(name=&quot;test_lab&quot;, connector=server)

lab.get()

hungry_router = lab.get_node(name=&quot;hungry_router&quot;)

# Get the CPU and Memory usage and calculate its average
cpu_usage = []
memory_usage = []
for index in range(5):
    compute_attrs = server.get_compute(compute_id=&quot;local&quot;)
    cpu_usage.append(compute_attrs.get(&quot;cpu_usage_percent&quot;))
    memory_usage.append(compute_attrs.get(&quot;memory_usage_percent&quot;))
    time.sleep(1)

cpu_avg = round(sum(cpu_usage) / len(cpu_usage), 2)
mem_avg = round(sum(memory_usage) / len(memory_usage), 2)

# If CPU is less than 40% and Memory is less than 50% turnup the nodes
if cpu_avg &lt;= 40.0 and mem_avg &lt;= 50.0:
    hungry_router.start()
    print(&quot;All good! starting hungry router&quot;)
else:
    print(
        f&quot;Hungry router does not have enough resources. CPU avg: {cpu_avg}%&quot;
        f&quot; Memory avg: {mem_avg}%&quot;
    )
</code></pre>

<h3 id="create-and-list-project-snapshots">Create and list project snapshots</h3>
<p>There is an attribute called <code>snapshots</code> under the <code>Project</code> instance, which stores snapshots information about that project.</p>
<p>You can create, delete and also search for specific snapshots of a project. See the <a href="../api_reference/#projectget_snapshots">API reference</a></p>
<p>Here is a snippet that creates and shows information about the snapshots configured on a project.</p>
<pre><code class="python">from datetime import datetime
from gns3fy import Gns3Connector, Project

lab = Project(name=&quot;test3&quot;, connector=Gns3Connector(url=&quot;http://gns3server01:3080&quot;))

lab.get()

# Create snapshot
lab.create_snapshot(name=&quot;snap3&quot;)

# Show configured snapshots
for snapshot in lab.snapshots:
    _time = datetime.utcfromtimestamp(snapshot['created_at']).strftime('%Y-%m-%d %H:%M:%S')
    print(f&quot;Snapshot: {snapshot['name']}, created at: {_time}&quot;)
</code></pre>

<p>It prints something similar to this:</p>
<pre><code>Created snapshot: snap3

Snapshot: snap1, created at: 2019-09-28 20:59:50
Snapshot: snap2, created at: 2019-09-28 20:59:54
Snapshot: snap3, created at: 2019-09-29 08:44:28
</code></pre></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Copyright &copy; 2019 David Flores<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>

        
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>var base_url = ".."</script>
    
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
